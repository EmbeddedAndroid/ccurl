#include "../src/lib/pearcldiver.h"
#include "../src/lib/PearlDiver.h"
#include "../src/lib/util/converter.h"
#include "../src/lib/Curl.h"

#include "cunit_include.h"
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <assert.h>
#include <string.h>
#include <unistd.h>

#define SIZE_IN_BYTES  49
#ifndef TRYTE_NINES
#endif
#define TRYTE_NINES "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
/*
#define TRYTE_NINES "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999"
#define TRYTE_NINESE "A99C99999A99I9999999H99999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999A"
#define NINE_TEN_NONCE "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999T99999999999999999999999999999999999999999999999999999IJA999999999999999999999999"
#define GOOD_NONCE "URPKKFWNEWRPNWOFEORUHGDBOTPYVQCSJKTTCDHVSIOCUPQFRNFV9NURJPLUMAKPQYVJYGCKGVHXNOQSDWBMWHLDMCJLTVYQPPNBPRLLAKRYMMUYDSH9NLBWZWXXPJUKMUDKKSOFOGYJGUNBIPB9ZPYVPWUW9MXNWPNYKUDUAZBDMHBGAUJW9RQKMDLELFQGABZZUXNZV9HMOPLXATLYTKMQHUVOLCNNGHNLLYSPN9ISXSFGWLFRJXDRFVORNR9FXTSXX9ACLQBAGQOHCWCOYLMCATJSIVVNNTLERFQSEUWZUQKIRDNQAKRYXKZORGYWFUZCEUPNBAETCWFOOAZORKHHPAANAMYLUOWOKEWYG9IOSRR9EGLHBBHDQLQNBKNRBLDHUCYZKRUFRADBJBPGJO9UQLDYKIZMZVNLLLGRRUWMQNQMKSRLOLO9VVNMOJRMPLMMKXK9FLJTVLNDVDEXTURJUVTITPTFDJGGHONFAYULLTEQZJFGUGLFVDQXVUNLIKHQAEMAZYUEHRITTYNYRCNZOOPP9FQUWRORAYHOHJHXCOYFYMBMLOLGXZIAA9WGJ9DZLISVXYGDCMZXNORCMKYXITYDZUPSRB9YMENCYVZVIJFUWZA9OMXICQSKDOVMAMFVZCRMHZUSDOIZMEWAOYBFMUKGPVXIZPMRUCYBHTGLLXURQRWWY9XZGVKQ9BIY9QRHLRMXRT9QEBQYKJCXRGWVBYXQMPRSUKNYCLFLYNNN9IY9YXGNOAVEELTOCZFDCPROEYALEECQBCOVEIJCSKKGOFJYCUJBNEQOXMECQMOAMYZYDA99EXVYNWOBYIVXW9SQPTSWCMTCCODWQTGENFZFKXEZEHBHBAAWFN9IJCBPKVXHQDCALHKHNFROXERCWQBKWESBNNYRVFFTZUMQ9NKREXOLGSYIMACZFU9KSFUWAQYDGHXMPSXJNLVWTMSGV9X9CFEZEUTFJX9MDJHFJQZWVIISSYPXSZPDSZZ9AEOAQHBCNCMVCJX9SNSVURPEQ9AKTRGDHKBRZJXRYRBYVPZNSEBUMLDLOWUEYOCZUSYXBKGVZLJUSBGCKHXDVJWJEADURSR9ISVMCDOYVZDLLVOHVQUWPQIXVWDGENVJNZBBMEJETCWSHCHJTTUOAEFCZG9BN9RBOQDLDUBTZUGQRPFIIWNQ9TGVTEVNUMECJJMNSQOJZAFONZH9WHINUWIAEZVWITFRBZCURXTEQWQVKSLRKKTWRSMKHWOXPZUDFXHKPBISRIOBMMSVEGBTWRGNKKDLLYFSDDWQPOILPPKMFAEN9BKLLLENYJDORKIBJMHZPXJLXRHHVTXZRV9GEQVTZMCZNYHAQN9JAIQRA9SNQBJNHBRJRDPHYJTWSBNLNENPS9VGOSAMPWLIW9EUQFRDWUWJLKUFUMKFJ9KCQORFQZPZFIDHUGYJQC9NPIFM9IWQTPRD9WUSSGHQBAFQVZTQBNRHPAZQGYIK9VAJRMIZNPMIPNZHUEISEBDWNBYQ9Q99A9EINJDIUKRHJDGXXJRM9MAZILPF9OCSS9PQSTHFJUQWXNHMDHSMBKTPWBPGOYVXXYZHLQVLAHPBOXBKKFWVATJMXNQXRJOSFKYIDAMDXSTTKRRZXXZMEIHSEGUWRJKSSGKQKTIBDK9JCUDYTKDWPBCSQYZZARTOQJTSIWOEWLYPIACLJHOQZDSZCZJMSZBR9SIZVR9RFDNFVVIRCZWUMHHCXK9UVFIICTWCEDHEORNJZPWXHSDKNL9GSCGYB9MJPCOLQZXUQAAMOFXNPTCVHHBZZIOJNFZTVEPHOOYMYNNRPKHURRW9LAGMVASLG9WVIA9ESVVGIHZNCMZUJZTWKVTVMKTLGAUSJHFZVWWFYDKWJDUMNMJAZBJDNCIYOBPQJYJKCIGSXHZZP9OALVSCDKTBIDZPEBZLCANFQLLGQPRWHTWRRXONLOFRUJOCEQUBESPKHLG9DTOIJUBEEYCXFTSEERHLZLKLUDGMWVUULFEKVQTUSKNZJVEHHXPEQLCKUXRTCYSIKEDEUMHRIYSRHSFMXMAAZKGVZWLVMVXAWYQDFX9YZVCIBCJLUAZSQMDNAXAKBCFYCPLMIBTPBBOZBSHAKUWOBLEPGGXWYZTMPLTDXKIHLYKZZRJ9IZZWGDOZRECOZHPODMAMJFAQHGYWOEWDAL9HODJMVKZCUXILVL9DPUKWVOGYTVUORVHODFNLXH9OJDB9MGORCHXYWLIQNCATZXZFRESVACPQKJXHN9INPVTAJIQKRJHZTU9NWCEYOUELXHTRBKQENTZJFDGXRCGBEFLDKAMKCTCAOUZHSRMBCSOATCRIFIDLFDXCAENZAPCDFZSWZIZFYN9LCCGBTXXYBVFIQLDKPRUMSMXRRNBHUJSYJNLMGXDVISHVNONKAOL9POMERVMIGD9PPXMKZGPFMJHZXOQZEUM9UFMRDKNMZBYKDGJLTOZAFZYL9XRDE9KBDIXMOWXFHMTWKXIVZYPMJDUZYPYKKULDZLKLSDOASOWLFAVQDQ9GEVUQJVHDQAJSHBKJVQGDQZKEXRWPNNOIKEQ9Q9GETNQYPY9GKBS9CCHIPNORAWSRJOYZOGNARMMHNQPPFNAZQBS9FITYTIJZICEWAFHTLXBTMSZMURTSJBLRLHYQQCUMI9UJIBXCRRFRA"
#define REAL_TRANSACTION "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999ZDWNRTMICEUJKUZIZGXKNUXGTFQTGNXHYHYYQYLWPPWKRWFVTIOBFGMVLKGCOGHF9LINGNLPHQBO9UHSE999999999999999999999999999999999999999999999999999999CAAUHVD99999999999999999999HRNCLJOVIU999QYHADTTFLUMTDSUAYKUUBWCWACGEPWZQUHQDWSGMFFKNHAIUUVQHPXOTHFFGLUUMYRMK999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999";
#define REAL_TRANS_W_HASH "999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999ZDWNRTMICEUJKUZIZGXKNUXGTFQTGNXHYHYYQYLWPPWKRWFVTIOBFGMVLKGCOGHF9LINGNLPHQBO9UHSE999999999999999999999999999999999999999999999999999999CAAUHVD99999999999999999999HRNCLJOVIU999QYHADTTFLUMTDSUAYKUUBWCWACGEPWZQUHQDWSGMFFKNHAIUUVQHPXOTHFFGLUUMYRMKPYHODCQSKTYJBNXYLMDXGTAIDMXNNXZPCJZD9PAXVITTAPLDDDAVZXHVY9QABYMTFGODIGFV9JZFW9999UNBHOV9VMEMRMBPJLEIJLUMXNFTSOMQ9JLNPAKOPIXALNXQHOMNRJPSRJOQYYWWXZJJX9FYOSKB999999XBKFGDZLRGMOMLDTQZOQ9DVUCNWCAXKOWCQDLLGMZAZKYYKIIQBT9X9RRMTMPPOAN9UJYKKBGNSWAZVHJ";
*/

typedef long trit_t;

static int init_suite(void) {
	//fprintf(stderr, "I: initializing converter...");
	init_converter();
	//fprintf(stderr, "done.\n");
	//pdcl = malloc(sizeof(PearCLDiver));
	return 0;
}
static int clean_suite(void) {
	//free(pdcl);
	return 0;
}
static void init_cl_test(void) {
}
static void teardown_cl_test(void) {
	//memset(pdcl,0,sizeof(PearCLDiver));
}

/*
static bool is_valid_hash(trit_t *const trits ) {
		Curl curl;
       	init_curl(&curl);
        trit_t hash_trits[HASH_LENGTH];

        absorb(&curl, trits, 0, TRANSACTION_LENGTH);
		//fprintf(stderr, "testing trits\n");
        squeeze(&curl, hash_trits, 0, HASH_LENGTH);

        char *hash = bytes_from_trits(hash_trits, HASH_LENGTH);
        if (hash[SIZE_IN_BYTES - 4] != 0 || hash[SIZE_IN_BYTES - 3] != 0 || hash[SIZE_IN_BYTES - 2] != 0 || hash[SIZE_IN_BYTES - 1] != 0) {
			return false;
        }
		return true;
}
*/

bool test_last_n_nines(char *hash, int length, int numNines) {
	int i;
	for( i = 1; i<= numNines; i++) {
		if(hash[length-i] != '9') return false;
	}
	return true;
}

static void test_init_kernel(void) {
	PearCLDiver pdcl;
	init_pearcl(&pdcl);
}

/*
static void test_tester (void) {
	char trytes[TRYTE_LENGTH] = TRYTE_NINES; 
	trit_t *mytrits = trits_from_trytes(trytes, 2673);

	trit_t hash_trits[HASH_LENGTH];
	Curl curl;
	init_curl(&curl);

	absorb(&curl, mytrits, 0, TRANSACTION_LENGTH);
	//fprintf(stderr, "testing trits\n");
	squeeze(&curl, hash_trits, 0, HASH_LENGTH);
	
	//fprintf(stderr, "Transaction Hash: %s", trytes_from_trits(hash_trits, HASH_LENGTH));
	
	CU_ASSERT_FATAL(is_valid_hash(mytrits));
	free(mytrits);
}
*/

static void test_search(void) {
	PearCLDiver pdcl;
	Curl curl;
	int mwm; 
	char *hash;
	trit_t *mytrits, hash_trits[HASH_LENGTH];

	init_pearcl(&pdcl);
	init_curl(&curl);
	mytrits = trits_from_trytes(TRYTE_NINES, 2673);
	mwm = 13;
	

	pearcl_search(&pdcl, mytrits, TRANSACTION_LENGTH, mwm);
	absorb(&curl, mytrits, 0, TRANSACTION_LENGTH);
	squeeze(&curl, hash_trits, 0, HASH_LENGTH);

	hash = trytes_from_trits(hash_trits, HASH_LENGTH);

	puts(hash);
	CU_ASSERT_FATAL(test_last_n_nines(hash, HASH_LENGTH/3, mwm/3));

	free(hash);
	free(mytrits);

	//CU_ASSERT(pdcl.pd.nonceFound);
	/*
	char trytes[TRANSACTION_LENGTH/3];
	trits2trytes(trytes, mytrits, TRANSACTION_LENGTH);

	puts(trytes);
	*/
	/*
	absorb(&curl, mytrits, 0, TRANSACTION_LENGTH);
	fprintf(stderr, "testing trits\n");
	squeeze(&curl, hash_trits, 0, HASH_LENGTH);

	puts(trytes_from_trits(hash_trits,HASH_LENGTH));
	printf("\nhere is the output\n");
		//CU_ASSERT_FATAL(is_valid_hash(mytrits));
	//}
	end = clock();
	trits2trytes(trytes, mytrits, TRANSACTION_LENGTH);
	//puts(trytes);
	time_per_cycle = (double)(end - begin) / CLOCKS_PER_SEC;
	*/
	//fprintf(stderr, "time_per_cycle: %f\n", time_per_cycle);
	/*
	clock_t begin; //end;
	double time_per_cycle;
	trit_t hash_trits[HASH_LENGTH];
	char trytes[TRYTE_LENGTH] = REAL_TRANS_W_HASH ;
	memset(trits,0,sizeof(trit_t)*TRANSACTION_LENGTH);
	trits = malloc(sizeof(TRANSACTION_LENGTH));
	memcpy(trits,rand_trits,TRANSACTION_LENGTH);
	begin = clock();
	CU_ASSERT_FALSE_FATAL(is_valid_hash(mytrits));
	for(mwm=1; mwm<HASH_LENGTH; mwm++) {
		fprintf(stderr, "Starting mwm %d\n", mwm);
	*/
}

static CU_TestInfo tests[] = {
	{"Test Init CL Kernels", test_init_kernel},
	{"Test Search ", test_search},
	CU_TEST_INFO_NULL,
	/*
	{"Test testing function", test_tester },
	*/
};

static CU_SuiteInfo suites[] = {
	{ "CLContext Test Suite", init_suite, clean_suite, init_cl_test,teardown_cl_test, tests },
	CU_SUITE_INFO_NULL,
};

//ADD_SUITE(suites);

int main() {
	return run_tests(suites);
}
